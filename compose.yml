services:
  word2vec-trainer:
    build: .
    container_name: word2vec_trainer
    volumes:
      - ./datasets:/app/datasets
      - ./models:/app/models
    env_file:
      - .env  # This file will be read, and its variables set into the container's environment
    environment:
      # Optionally override any env settings here if needed; otherwise, rely on .env.
      # For example, you could override DATASET_PATH & DATASET_URL for a different language version.
      DATASET_PATH: datasets/enwiki-latest-pages-articles.xml.bz2
      DATASET_URL: https://dumps.wikimedia.org/enwiki/latest/enwiki-latest-pages-articles.xml.bz2
      MODEL_NAME: word2vec_enwiki-latest-pages-articles
      MODEL_TYPE: Word2Vec
      MODEL_RETRAIN: false
      UPLOAD_TO_VECTORDB: true
      VECTORDB_HOST: qdrant
      VECTORDB_COLLECTION: ${MODEL_NAME} # Useful if you have another format
    depends_on:
      - qdrant

  qdrant:
    image: qdrant/qdrant
    container_name: qdrant
    ports:
      - "6333:6333"
    volumes:
      - qdrant_data:/qdrant/storage

volumes:
  qdrant_data:
